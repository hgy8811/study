# Virtual概述

## Instrumentation  进行Activity的欺上瞒下

生成VAInstrumentation 代理Activity请求调用

## IActivityManager ActivityManagerService的Binder接口对象

生成ActivityMnagerProxy 代理Service请求调用

startService
bindService
unBindService

预埋两个Service： LocalService/RemoteService
启动插件Service的时候进行判断,实际启动对应上面的两个Service

实例化Service
反射调用Attach方法
调用OnCreate方法
调用OnStartCommond/ServiceConnection.connected方法

## ContentProvider

预埋一个RemoteContentProvider

ActivityThread ->mProviderMap -> ProviderClientRecord -> mProvider(IContentProvider)

IContentProvider：ContentProvider 在 客户端的代理

生成IProxyContentProvider  代理ContentProvider请求调用

## BrocastReceiver

静态注册解析 转为 动态注册
